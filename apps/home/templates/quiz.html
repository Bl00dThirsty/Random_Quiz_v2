{% extends "layouts/base.html" %}

{% block title %}  Quiz{% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}


{% block content %}

    <div id="app">
        <div class="container mt-5 pt-5">
            <div class="col-md-6 mx-auto">

                <div v-for="question in questions" :key="question.id">
                    <hr>

                <p>[[question.question]]</p>
                <div class="form-check" v-for="answer in question.answers">
                    <input @change="checkAnswer($event, question.uid)" value="[[answer.answer]]" class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                    <label class="form-check-label" for="flexRadioDefault1">
                    [[answer.answer]]
                    </label>

                </div>
                <hr>
                        
                </div>
            </div>
        </div>
    </div>



    {% endblock content %}
    
    
    
   


{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>



<script>
        var app = new Vue({
    
            el: '#app',
            delimiters: ['[[', ']]'],
            data() {
                return {
                    category : '{{category}}',
                    questions : [],
                }
            },


            
            methods: {
        // ...
                getQuestions() {
                        var _this = this;
                        return fetch(`/api/get-quiz/?category=${this.category}`)
                            .then(response => response.json())
                            .then(result => {
                                console.log(result);
                                _this.questions = result.data;
                            });
                },
                checkAnswer(event, uid) {
                    this.questions.map(question =>{
                        answers = question.answers
                        for(var i=0; i < answers.length; i++){
    
                            console.log()
                            if(answers[i].answer == event.target.value){
                                if(answers[i].is_correct){
                                    console.log('reponse juste')
                                    alert('hurrrr correcte')
                                }else{
                                    console.log('reponse fausse')
                                }
                            }
                        }
                    });
    
                    console.log(event.target.value, uid)
                },
    
    },
           //methods : {
               // getQuestions(){
              //      var _this = this
                  //  fetch(`/api/get-quiz/?category=${this.category}`)
                    //.then(response => response.json())
                    //.then(result => {
                        //console.log(result)
                        //_this.questions = result.data
                    //})

                    
              //  },

                
    
                
            
            created() {
                this.getQuestions();
            }
    
    
                });


                
    
        </script>
	<!--<script src="/static/assets/js/question.js"></script>
	<script src="/static/assets/js/script.js"></script>-->

{% endblock javascripts %}